import{o as v,r as i,C as y,u as x,j as e,m as l,b as j,R as u}from"./index-BMjTxWI5.js";import{B as w}from"./Button-D0cEhXue.js";import{I as c}from"./Input-kAJO1UCZ.js";const b="_register_hfr5v_1",N="_container_hfr5v_17",C="_form_hfr5v_27",E="_title_hfr5v_39",L="_error_hfr5v_53",B="_submitBtn_hfr5v_71",I="_loginLink_hfr5v_81",r={register:b,container:N,form:C,title:E,error:L,submitBtn:B,loginLink:I},D=v(()=>{const{store:p}=i.useContext(y),[a,f]=i.useState({email:"",password:"",confirmPassword:""}),[h,m]=i.useState(!1),[d,s]=i.useState(""),g=x(),o=t=>{f(n=>({...n,[t.target.name]:t.target.value})),s("")},_=async t=>{if(t.preventDefault(),a.password!==a.confirmPassword){s("Пароли не совпадают");return}if(a.password.length<6){s("Пароль должен содержать минимум 6 символов");return}m(!0),s("");try{await p.registration(a.email,a.password),g(u.ACTIVATION_REQUIRED,{replace:!0})}catch(n){s(n.response?.data?.message||"Ошибка регистрации")}finally{m(!1)}};return e.jsx("div",{className:r.register,children:e.jsx(l.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:r.container,children:e.jsxs(l.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},onSubmit:_,className:r.form,children:[e.jsx("h2",{className:r.title,children:"Создать аккаунт"}),d&&e.jsx(l.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:r.error,children:d}),e.jsx(c,{label:"Email",type:"email",name:"email",value:a.email,onChange:o,required:!0,placeholder:"your@email.com"}),e.jsx(c,{label:"Пароль",type:"password",name:"password",value:a.password,onChange:o,required:!0,placeholder:"Минимум 6 символов"}),e.jsx(c,{label:"Подтвердите пароль",type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:o,required:!0,placeholder:"Повторите пароль"}),e.jsx(w,{type:"submit",variant:"primary",size:"large",loading:h,className:r.submitBtn,children:"Зарегистрироваться"}),e.jsxs("p",{className:r.loginLink,children:["Уже есть аккаунт? ",e.jsx(j,{to:u.LOGIN,children:"Войти"})]})]})})})});export{D as default};
