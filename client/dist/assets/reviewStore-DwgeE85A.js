import{$ as i,k as o}from"./index-BMjTxWI5.js";const r={createReview:a=>i.post("/reviews",a),getReviews:()=>i.get("/reviews"),getMyReviews:()=>i.get("/reviews/my")};class n{reviews=[];myReviews=[];loading=!1;hasMore=!0;page=1;limit=10;constructor(){o(this)}setReviews(e){this.reviews=e}setMyReviews(e){this.myReviews=e}setLoading(e){this.loading=e}setHasMore(e){this.hasMore=e}setPage(e){this.page=e}fetchReviews=async(e=!1)=>{if(e&&(this.setPage(1),this.setHasMore(!0)),!(!e&&!this.hasMore)){this.setLoading(!0);try{const s=await r.getReviews(),t=s.data.reviews||s.data;e?this.setReviews(t):this.setReviews([...this.reviews,...t]),this.setHasMore(t.length===this.limit),this.setPage(this.page+1)}catch(s){console.error("Error fetching reviews:",s)}finally{this.setLoading(!1)}}};async loadMoreReviews(){await this.fetchReviews(!1)}createReview=async e=>{this.setLoading(!0);try{return(await r.createReview(e)).data}catch(s){throw console.error("Error creating review:",s),s}finally{this.setLoading(!1)}};fetchMyReviews=async()=>{this.setLoading(!0);try{const e=await r.getMyReviews();return this.setMyReviews(e.data),e.data}catch(e){console.error("Error fetching my reviews:",e)}finally{this.setLoading(!1)}}}const h=new n;export{h as r};
