import{o as y,j as e,m as n,u as N,r as _,L as j,R as b,g}from"./index-BMjTxWI5.js";import{o as f}from"./orderStore-DYeG6_Kd.js";import{S as C}from"./StatusBadge-DyHTHczb.js";import{B as p}from"./Button-D0cEhXue.js";import"./dateUtils-S97u1aLj.js";const D="_card_g0puu_1",I="_header_g0puu_27",L="_orderInfo_g0puu_43",S="_orderNumber_g0puu_55",T="_date_g0puu_69",$="_content_g0puu_79",w="_accountInfo_g0puu_87",O="_accountImage_g0puu_101",H="_accountDetails_g0puu_115",k="_accountName_g0puu_123",E="_accountNumber_g0puu_137",P="_orderDetails_g0puu_149",V="_detail_g0puu_161",G="_detailLabel_g0puu_173",R="_detailValue_g0puu_183",B="_detailPrice_g0puu_195",z="_actions_g0puu_207",a={card:D,header:I,orderInfo:L,orderNumber:S,date:T,content:$,accountInfo:w,accountImage:O,accountDetails:H,accountName:k,accountNumber:E,orderDetails:P,detail:V,detailLabel:G,detailValue:R,detailPrice:B,actions:z},A=y(({order:c,onCancel:r,onViewDetails:d})=>{const o=s=>new Date(s).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),u=c.status==="pending";return e.jsxs(n.div,{className:a.card,whileHover:{y:-2},transition:{duration:.2},children:[e.jsxs("div",{className:a.header,children:[e.jsxs("div",{className:a.orderInfo,children:[e.jsxs("h3",{className:a.orderNumber,children:["Заказ #",c.id]}),e.jsx("span",{className:a.date,children:o(c.createdAt)})]}),e.jsx(C,{status:c.status})]}),e.jsxs("div",{className:a.content,children:[e.jsxs("div",{className:a.accountInfo,children:[e.jsx("img",{src:"/api/img/"+c.account?.img,alt:"err",className:a.accountImage}),e.jsxs("div",{className:a.accountDetails,children:[e.jsx("h4",{className:a.accountName,children:c.account?.title}),e.jsxs("p",{className:a.accountNumber,children:["#",c.account?.account_number]})]})]}),e.jsxs("div",{className:a.orderDetails,children:[e.jsxs("div",{className:a.detail,children:[e.jsx("span",{className:a.detailLabel,children:"Время аренды:"}),e.jsxs("span",{className:a.detailValue,children:[c.rentPeriod," ч"]})]}),e.jsxs("div",{className:a.detail,children:[e.jsx("span",{className:a.detailLabel,children:"Стоимость:"}),e.jsxs("span",{className:a.detailPrice,children:[c.amount," ₽"]})]})]})]}),e.jsxs("div",{className:a.actions,children:[e.jsx(p,{variant:"secondary",size:"small",onClick:()=>d(c.id),children:"Подробнее"}),u&&e.jsx(p,{variant:"primary",size:"small",onClick:()=>{r(c.id),window.location.reload()},children:"Отменить"})]})]})}),M="_orderHistory_1vy4o_1",U="_container_1vy4o_11",q="_breadcrumbs_1vy4o_23",F="_loading_1vy4o_61",J="_header_1vy4o_75",K="_title_1vy4o_85",Q="_subtitle_1vy4o_99",W="_tabs_1vy4o_111",X="_tab_1vy4o_111",Y="_active_1vy4o_161",Z="_ordersList_1vy4o_189",ee="_ordersGrid_1vy4o_197",te="_emptyState_1vy4o_209",ae="_emptyContent_1vy4o_225",se="_emptyTitle_1vy4o_245",ce="_emptyText_1vy4o_259",t={orderHistory:M,container:U,breadcrumbs:q,loading:F,header:J,title:K,subtitle:Q,tabs:W,tab:X,active:Y,ordersList:Z,ordersGrid:ee,emptyState:te,emptyContent:ae,emptyTitle:se,emptyText:ce},de=y(()=>{const c=N(),{orders:r,loading:d,fetchMyOrders:o,cancelOrder:u}=f,[s,l]=_.useState("all");_.useEffect(()=>{o()},[o]);const m=r.filter(i=>s==="all"?!0:s==="active"?["pending","paid","verified","active"].includes(i.status):s==="completed"?["completed"].includes(i.status):s==="cancelled"?["cancelled"].includes(i.status):!0),h=async i=>{if(window.confirm("Вы уверены, что хотите отменить заказ?"))try{await u(i)}catch(x){console.error("Error cancelling order:",x)}},v=i=>{c(g.orderDetail(i))};return d&&r.length===0?e.jsx("div",{className:t.loading,children:e.jsx(j,{fullScreen:!0})}):e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:t.orderHistory,children:e.jsxs("div",{className:t.container,children:[e.jsxs("nav",{className:t.breadcrumbs,children:[e.jsx("a",{href:b.HOME,children:"Главная"}),e.jsx("span",{children:"/"}),e.jsx("span",{children:"Мои заказы"})]}),e.jsxs(n.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:t.header,children:[e.jsx("h1",{className:t.title,children:"Мои заказы"}),e.jsx("p",{className:t.subtitle,children:"История всех ваших заказов и их текущий статус"})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:t.tabs,children:[e.jsx("button",{className:`${t.tab} ${s==="all"?t.active:""}`,onClick:()=>l("all"),children:"Все заказы"}),e.jsx("button",{className:`${t.tab} ${s==="active"?t.active:""}`,onClick:()=>l("active"),children:"Активные"}),e.jsx("button",{className:`${t.tab} ${s==="completed"?t.active:""}`,onClick:()=>l("completed"),children:"Завершенные"}),e.jsx("button",{className:`${t.tab} ${s==="cancelled"?t.active:""}`,onClick:()=>l("cancelled"),children:"Отмененные"})]}),e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:t.ordersList,children:m.length>0?e.jsx("div",{className:t.ordersGrid,children:m.map(i=>e.jsx(A,{order:i,onCancel:h,onViewDetails:v},i.id))}):e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:t.emptyState,children:e.jsxs("div",{className:t.emptyContent,children:[e.jsx("h3",{className:t.emptyTitle,children:s==="all"?"Заказов пока нет":s==="active"?"Нет активных заказов":s==="completed"?"Нет завершенных заказов":"Нет отмененных заказов"}),e.jsx("p",{className:t.emptyText,children:s==="all"?"Здесь будут отображаться все ваши заказы на аренду аккаунтов":"Заказы по этому фильтру не найдены"})]})})})]})})});export{de as default};
