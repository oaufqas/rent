import{c as S,o as E,r as n,j as e,m as x,i as R,n as I}from"./index-C-KVzDfL.js";import{a as H}from"./adminStore-CQx7drL5.js";import{B as r}from"./Button-DNnCRmfV.js";import{M as T}from"./Modal-2Jv52JHA.js";import{I as p}from"./Input-BOMiBcEe.js";import{P as b}from"./plus-Co95Razd.js";import{S as u}from"./square-pen-D-b6ur9R.js";import{T as w}from"./trash-2-Bup_68xb.js";import"./AccountService-BxV9YHVG.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],k=S("toggle-left",q);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],A=S("toggle-right",O),U="_paymentMethodsManagement_17yay_1",J="_header_17yay_11",K="_title_17yay_27",Q="_subtitle_17yay_43",V="_controls_17yay_57",W="_search_17yay_69",X="_searchIcon_17yay_81",Y="_searchInput_17yay_97",Z="_tableContainer_17yay_131",ee="_loading_17yay_145",te="_table_17yay_131",ae="_tableRow_17yay_203",se="_methodInfo_17yay_221",le="_methodIcon_17yay_233",ie="_methodName_17yay_257",ne="_formGroup_17yay_279",oe="_label_17yay_291",ce="_select_17yay_309",re="_methodDetails_17yay_341",de="_statusToggle_17yay_363",me="_active_17yay_391",he="_inactive_17yay_403",ye="_actions_17yay_425",_e="_actionBtn_17yay_435",xe="_modalForm_17yay_487",pe="_modalActions_17yay_625",je="_emptyState_17yay_643",be="_emptyContent_17yay_659",ue="_emptyTitle_17yay_685",ve="_emptyText_17yay_699",Ne="_mobileMethods_17yay_719",fe="_mobileMethodCard_17yay_731",Me="_mobileMethodHeader_17yay_751",ge="_mobileMethodInfo_17yay_765",Ce="_mobileMethodIcon_17yay_779",Ie="_mobileMethodDetails_17yay_805",Te="_mobileMethodName_17yay_813",we="_mobileMethodType_17yay_827",ke="_mobileMethodDescription_17yay_903",Ae="_mobileActions_17yay_927",t={paymentMethodsManagement:U,header:J,title:K,subtitle:Q,controls:V,search:W,searchIcon:X,searchInput:Y,tableContainer:Z,loading:ee,table:te,tableRow:ae,methodInfo:se,methodIcon:le,methodName:ie,formGroup:ne,label:oe,select:ce,methodDetails:re,statusToggle:de,active:me,inactive:he,actions:ye,actionBtn:_e,delete:"_delete_17yay_473",modalForm:xe,modalActions:pe,emptyState:je,emptyContent:be,emptyTitle:ue,emptyText:ve,mobileMethods:Ne,mobileMethodCard:fe,mobileMethodHeader:Me,mobileMethodInfo:ge,mobileMethodIcon:Ce,mobileMethodDetails:Ie,mobileMethodName:Te,mobileMethodType:we,mobileMethodDescription:ke,mobileActions:Ae},Ee=E(()=>{const{paymentMethods:z,loading:v,getAllPaymentMethods:o,createPaymentMethod:D,changePaymentMethods:N,deletePaymentMethods:$}=H,[d,B]=n.useState(""),[G,m]=n.useState(!1),[L,h]=n.useState(!1),[y,f]=n.useState(null),[l,i]=n.useState({name:"",details:"",type:""}),[c,_]=n.useState(!1);n.useEffect(()=>{o()},[o]);const j=z.filter(a=>a.name?.toLowerCase().includes(d.toLowerCase())||a.details?.toLowerCase().includes(d.toLowerCase())),P=async a=>{if(a.preventDefault(),!l.name.trim()){alert("Введите название метода оплаты");return}_(!0);try{await D(l.name,l.details,l.type),m(!1),i({name:"",details:"",type:"bank_transfer"}),o()}catch{alert("Ошибка при создании метода оплаты")}finally{_(!1)}},M=a=>{f(a),i({name:a.name,details:a.details,type:a.type}),h(!0)},F=async a=>{if(a.preventDefault(),!l.name.trim()){alert("Введите название метода оплаты");return}_(!0);try{await N(y.id,l.name,l.details,l.type,y.isActive),h(!1),f(null),i({name:"",details:"",type:"bank_transfer"}),o()}catch{alert("Ошибка при обновлении метода оплаты")}finally{_(!1)}},g=async a=>{if(window.confirm("Вы уверены, что хотите удалить этот метод оплаты?"))try{await $(a),o()}catch{alert("Ошибка при удалении метода оплаты")}},C=async a=>{try{await N(a.id,a.name,a.details,a.type,!a.isActive),o()}catch(s){console.error(s),alert("Ошибка при изменении статуса метода оплаты")}};return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:t.paymentMethodsManagement,children:[e.jsxs("div",{className:t.header,children:[e.jsxs("div",{children:[e.jsx("h1",{className:t.title,children:"Управление методами оплаты"}),e.jsx("p",{className:t.subtitle,children:"Добавление и редактирование способов оплаты"})]}),e.jsxs(r,{variant:"primary",onClick:()=>{m(!0),i({name:"",details:"",type:"bank_transfer"})},children:[e.jsx(b,{size:16}),"Добавить метод"]})]}),e.jsx("div",{className:t.controls,children:e.jsxs("div",{className:t.search,children:[e.jsx(R,{size:20,className:t.searchIcon}),e.jsx("input",{type:"text",placeholder:"Поиск методов оплаты...",className:t.searchInput,value:d,onChange:a=>B(a.target.value)})]})}),e.jsx("div",{className:t.tableContainer,children:v?e.jsx("div",{className:t.loading,children:"Загрузка методов оплаты..."}):e.jsxs("table",{className:t.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Название"}),e.jsx("th",{children:"Детали"}),e.jsx("th",{children:"Статус"}),e.jsx("th",{children:"Действия"})]})}),e.jsx("tbody",{children:j.map((a,s)=>e.jsxs(x.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:s*.1},className:t.tableRow,children:[e.jsx("td",{children:e.jsxs("div",{className:t.methodInfo,children:[e.jsx("div",{className:t.methodIcon,children:e.jsx(I,{size:20})}),e.jsx("span",{className:t.methodName,children:a.name})]})}),e.jsx("td",{children:e.jsx("span",{className:t.methodDetails,children:a.details||"—"})}),e.jsx("td",{children:e.jsxs("button",{onClick:()=>C(a),className:`${t.statusToggle} ${a.isActive?t.active:t.inactive}`,title:a.isActive?"Деактивировать":"Активировать",children:[a.isActive?e.jsx(A,{size:20}):e.jsx(k,{size:20}),e.jsx("span",{children:a.isActive?"Активен":"Неактивен"})]})}),e.jsx("td",{children:e.jsxs("div",{className:t.actions,children:[e.jsx("button",{onClick:()=>M(a),className:t.actionBtn,title:"Редактировать",children:e.jsx(u,{size:16})}),e.jsx("button",{onClick:()=>g(a.id),className:`${t.actionBtn} ${t.delete}`,title:"Удалить",children:e.jsx(w,{size:16})})]})})]},a.id))})]})}),e.jsx("div",{className:t.mobileMethods,children:j.map((a,s)=>e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:s*.1},className:t.mobileMethodCard,children:[e.jsxs("div",{className:t.mobileMethodHeader,children:[e.jsxs("div",{className:t.mobileMethodInfo,children:[e.jsx("div",{className:t.mobileMethodIcon,children:e.jsx(I,{size:20})}),e.jsxs("div",{className:t.mobileMethodDetails,children:[e.jsx("h3",{className:t.mobileMethodName,children:a.name}),e.jsx("p",{className:t.mobileMethodType,children:a.type})]})]}),e.jsxs("button",{onClick:()=>C(a),className:`${t.statusToggle} ${a.isActive?t.active:t.inactive}`,title:a.isActive?"Деактивировать":"Активировать",children:[a.isActive?e.jsx(A,{size:20}):e.jsx(k,{size:20}),e.jsx("span",{children:a.isActive?"Активен":"Неактивен"})]})]}),a.details&&e.jsx("div",{className:t.mobileMethodDescription,children:a.details}),e.jsxs("div",{className:t.mobileActions,children:[e.jsxs("button",{onClick:()=>M(a),className:t.actionBtn,title:"Редактировать",children:[e.jsx(u,{size:16}),"Редактировать"]}),e.jsxs("button",{onClick:()=>g(a.id),className:`${t.actionBtn} ${t.delete}`,title:"Удалить",children:[e.jsx(w,{size:16}),"Удалить"]})]})]},a.id))}),e.jsx(T,{isOpen:G,onClose:()=>m(!1),title:"Добавление метода оплаты",size:"medium",children:e.jsxs("form",{onSubmit:P,className:t.modalForm,children:[e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{className:t.label,children:"Название метода *"}),e.jsx(p,{type:"text",value:l.name,onChange:a=>i(s=>({...s,name:a.target.value})),placeholder:"Например: Банковская карта, Криптовалюта...",required:!0})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{className:t.label,children:"Детали и инструкции"}),e.jsx(p,{as:"textarea",value:l.details,onChange:a=>i(s=>({...s,details:a.target.value})),placeholder:"Реквизиты, инструкции по оплате, комиссии...",rows:4})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{className:t.label,children:"Тип"}),e.jsxs("select",{className:t.select,value:l.type,onChange:a=>i(s=>({...s,type:a.target.value})),children:[e.jsx("option",{value:"bank_transfer",children:"Банк"}),e.jsx("option",{value:"crypto",children:"Криптовалюта"})]})]}),e.jsxs("div",{className:t.modalActions,children:[e.jsx(r,{type:"button",variant:"secondary",onClick:()=>m(!1),disabled:c,children:"Отмена"}),e.jsxs(r,{type:"submit",variant:"primary",loading:c,disabled:c,children:[e.jsx(b,{size:16}),"Создать метод"]})]})]})}),e.jsx(T,{isOpen:L,onClose:()=>h(!1),title:`Редактирование: ${y?.name}`,size:"medium",children:y&&e.jsxs("form",{onSubmit:F,className:t.modalForm,children:[e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{className:t.label,children:"Название метода *"}),e.jsx(p,{type:"text",value:l.name,onChange:a=>i(s=>({...s,name:a.target.value})),placeholder:"Например: Банковская карта, Криптовалюта...",required:!0})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{className:t.label,children:"Детали и инструкции"}),e.jsx(p,{as:"textarea",value:l.details,onChange:a=>i(s=>({...s,details:a.target.value})),placeholder:"Реквизиты, инструкции по оплате, комиссии...",rows:4})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{className:t.label,children:"Тип"}),e.jsxs("select",{className:t.select,value:l.type,onChange:a=>i(s=>({...s,type:a.target.value})),children:[e.jsx("option",{value:"bank_transfer",children:"Банк"}),e.jsx("option",{value:"crypto",children:"Криптовалюта"})]})]}),e.jsxs("div",{className:t.modalActions,children:[e.jsx(r,{type:"button",variant:"secondary",onClick:()=>h(!1),disabled:c,children:"Отмена"}),e.jsxs(r,{type:"submit",variant:"primary",loading:c,disabled:c,children:[e.jsx(u,{size:16}),"Обновить метод"]})]})]})}),j.length===0&&!v&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:t.emptyState,children:e.jsxs("div",{className:t.emptyContent,children:[e.jsx("h3",{className:t.emptyTitle,children:d?"Методы оплаты не найдены":"Методов оплаты пока нет"}),e.jsx("p",{className:t.emptyText,children:d?"Попробуйте изменить параметры поиска":"Добавьте первый метод оплаты для использования в системе"}),e.jsxs(r,{variant:"primary",onClick:()=>m(!0),children:[e.jsx(b,{size:16}),"Добавить метод оплаты"]})]})})]})});export{Ee as default};
