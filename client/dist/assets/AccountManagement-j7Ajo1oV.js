import{o as $,r as l,j as e,m as _,i as G,g as O,R as V}from"./index-BMjTxWI5.js";import{a as J}from"./adminStore-69BTUR3l.js";import{B as h}from"./Button-D0cEhXue.js";import{S as v}from"./StatusBadge-DyHTHczb.js";import{f as N}from"./formatters-DNE1yS1Z.js";import{M as K}from"./Modal-DaGtJTxd.js";import{P as M}from"./plus-q25SrC8U.js";import{R as q}from"./refresh-cw-BMtVyPWz.js";import{E as R}from"./eye-Bw0ziA_o.js";import{S as B}from"./square-pen-CuRK6_x8.js";import{T as k}from"./trash-2-DfGCYa6Z.js";import{C as Q}from"./clock-DKQpXJuy.js";import"./AccountService-vNVs7x2E.js";import"./dateUtils-S97u1aLj.js";const W="_accountManagement_1oqs5_1",X="_header_1oqs5_11",Y="_title_1oqs5_27",Z="_subtitle_1oqs5_43",ee="_statusCell_1oqs5_59",se="_statusChangeBtn_1oqs5_71",te="_statusModal_1oqs5_111",ae="_accountPreview_1oqs5_119",oe="_previewImage_1oqs5_139",ne="_previewInfo_1oqs5_155",ie="_previewTitle_1oqs5_163",le="_previewNumber_1oqs5_177",ce="_statusForm_1oqs5_203",re="_formGroup_1oqs5_215",me="_label_1oqs5_227",de="_select_1oqs5_245",ue="_input_1oqs5_245",_e="_hoursHint_1oqs5_277",he="_statusInfo_1oqs5_289",be="_infoFree_1oqs5_303",xe="_infoRented_1oqs5_315",je="_infoUnavailable_1oqs5_327",pe="_modalActions_1oqs5_339",fe="_controls_1oqs5_395",ve="_search_1oqs5_411",Ne="_searchIcon_1oqs5_425",qe="_searchInput_1oqs5_443",Ie="_filters_1oqs5_491",ge="_filterSelect_1oqs5_505",Ae="_tableContainer_1oqs5_573",ye="_table_1oqs5_573",Ce="_tableRow_1oqs5_639",we="_accountId_1oqs5_657",Se="_accountInfo_1oqs5_669",Te="_accountImage_1oqs5_681",Fe="_features_1oqs5_723",Me="_feature_1oqs5_723",Re="_actions_1oqs5_773",Be="_actionBtn_1oqs5_783",ke="_loading_1oqs5_911",ze="_emptyState_1oqs5_963",Pe="_emptyContent_1oqs5_979",Ee="_emptyIcon_1oqs5_987",Le="_emptyTitle_1oqs5_999",He="_emptyText_1oqs5_1015",De="_mobileAccounts_1oqs5_1035",Ue="_mobileAccountCard_1oqs5_1047",$e="_mobileAccountHeader_1oqs5_1067",Ge="_mobileAccountId_1oqs5_1081",Oe="_mobileAccountMain_1oqs5_1095",Ve="_mobileAccountImage_1oqs5_1107",Je="_mobileAccountDetails_1oqs5_1123",Ke="_mobileAccountTitle_1oqs5_1131",Qe="_mobileAccountNumber_1oqs5_1145",We="_mobileAccountInfo_1oqs5_1157",Xe="_mobileInfoRow_1oqs5_1169",Ye="_mobileInfoLabel_1oqs5_1193",Ze="_mobileInfoValue_1oqs5_1205",es="_mobileFeatures_1oqs5_1219",ss="_mobileFeature_1oqs5_1219",ts="_mobileActions_1oqs5_1251",as="_mobileStatusCell_1oqs5_1279",s={accountManagement:W,header:X,title:Y,subtitle:Z,statusCell:ee,statusChangeBtn:se,statusModal:te,accountPreview:ae,previewImage:oe,previewInfo:ne,previewTitle:ie,previewNumber:le,statusForm:ce,formGroup:re,label:me,select:de,input:ue,hoursHint:_e,statusInfo:he,infoFree:be,infoRented:xe,infoUnavailable:je,modalActions:pe,controls:fe,search:ve,searchIcon:Ne,searchInput:qe,filters:Ie,filterSelect:ge,tableContainer:Ae,table:ye,tableRow:Ce,accountId:we,accountInfo:Se,accountImage:Te,features:Fe,feature:Me,actions:Re,actionBtn:Be,delete:"_delete_1oqs5_825",loading:ke,emptyState:ze,emptyContent:Pe,emptyIcon:Ee,emptyTitle:Le,emptyText:He,mobileAccounts:De,mobileAccountCard:Ue,mobileAccountHeader:$e,mobileAccountId:Ge,mobileAccountMain:Oe,mobileAccountImage:Ve,mobileAccountDetails:Je,mobileAccountTitle:Ke,mobileAccountNumber:Qe,mobileAccountInfo:We,mobileInfoRow:Xe,mobileInfoLabel:Ye,mobileInfoValue:Ze,mobileFeatures:es,mobileFeature:ss,mobileActions:ts,mobileStatusCell:as},ps=$(()=>{const{accounts:I,loading:g,fetchAccounts:b,deleteAccount:z,updateAccountStatus:P}=J,[c,E]=l.useState(""),[r,L]=l.useState("all"),[i,H]=l.useState(null),[D,d]=l.useState(!1),[o,x]=l.useState({status:"free",hours:1}),[j,A]=l.useState(!1);let u=[];l.useEffect(()=>{b()},[b]),I&&(u=I.filter(t=>{const a=t.title?.toLowerCase().includes(c.toLowerCase())||t.account_number?.toString().includes(c),n=r==="all"||t.status===r;return a&&n}));const y=t=>{window.location.href=O.editAccount(t)},C=async t=>{if(window.confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∞–∫–∫–∞—É–Ω—Ç?"))try{await z(t),window.location.reload()}catch{alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞")}},w=t=>{window.open(`/accounts/${t}`,"_blank")},S=()=>{window.location.href=V.ADMIN_CREATE_ACCOUNT},T=t=>{H(t),x({status:t.status,hours:1}),d(!0)},U=async()=>{if(i){A(!0);try{await P(i.id,o.status,o.status==="rented"?o.hours:null),d(!1),b()}catch{alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞")}finally{A(!1)}}},F=t=>{if(!t)return[];try{const a=typeof t=="string"?JSON.parse(t):t;return Object.entries(a).filter(([n,m])=>m===!0).map(([n])=>n)}catch{return[]}};return e.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},className:s.accountManagement,children:[e.jsxs("div",{className:s.header,children:[e.jsxs("div",{children:[e.jsx("h1",{className:s.title,children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏"}),e.jsx("p",{className:s.subtitle,children:"–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤"})]}),e.jsxs(h,{variant:"primary",onClick:S,children:[e.jsx(M,{size:16}),"–î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç"]})]}),e.jsxs("div",{className:s.controls,children:[e.jsxs("div",{className:s.search,children:[e.jsx(G,{size:20,className:s.searchIcon}),e.jsx("input",{type:"text",placeholder:"–ü–æ–∏—Å–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤...",className:s.searchInput,value:c,onChange:t=>E(t.target.value)})]}),e.jsx("div",{className:s.filters,children:e.jsxs("select",{className:s.filterSelect,value:r,onChange:t=>L(t.target.value),children:[e.jsx("option",{value:"all",children:"–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã"}),e.jsx("option",{value:"free",children:"–°–≤–æ–±–æ–¥–µ–Ω"}),e.jsx("option",{value:"rented",children:"–ê—Ä–µ–Ω–¥–æ–≤–∞–Ω"}),e.jsx("option",{value:"unavailable",children:"–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω"})]})})]}),e.jsx("div",{className:s.tableContainer,children:g?e.jsx("div",{className:s.loading,children:"–ó–∞–≥—Ä—É–∑–∫–∞..."}):e.jsxs("table",{className:s.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"–ù–∞–∑–≤–∞–Ω–∏–µ"}),e.jsx("th",{children:"–ù–æ–º–µ—Ä"}),e.jsx("th",{children:"–°—Ç–∞—Ç—É—Å"}),e.jsx("th",{children:"–¶–µ–Ω–∞/—á–∞—Å"}),e.jsx("th",{children:"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏"}),e.jsx("th",{children:"–î–µ–π—Å—Ç–≤–∏—è"})]})}),e.jsx("tbody",{children:u.map((t,a)=>{const n=F(t.characters),m=t.price;return e.jsxs(_.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:a*.1},className:s.tableRow,children:[e.jsxs("td",{className:s.accountId,children:["#",t.id]}),e.jsx("td",{children:e.jsxs("div",{className:s.accountInfo,children:[e.jsx("img",{src:"/api/img/"+t.img,alt:t.title,className:s.accountImage}),e.jsx("span",{children:t.title})]})}),e.jsx("td",{children:t.account_number}),e.jsx("td",{children:e.jsxs("div",{className:s.statusCell,children:[e.jsx(v,{status:t.status,account:t}),e.jsx("button",{onClick:()=>T(t),className:s.statusChangeBtn,title:"–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å",children:e.jsx(q,{size:14})})]})}),e.jsx("td",{children:N(m)}),e.jsx("td",{children:e.jsx("div",{className:s.features,children:n.map((p,f)=>e.jsx("span",{className:s.feature,children:p},f))})}),e.jsx("td",{children:e.jsxs("div",{className:s.actions,children:[e.jsx("button",{onClick:()=>w(t.id),className:s.actionBtn,title:"–ü—Ä–æ—Å–º–æ—Ç—Ä",children:e.jsx(R,{size:16})}),e.jsx("button",{onClick:()=>y(t.id),className:s.actionBtn,title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",children:e.jsx(B,{size:16})}),e.jsx("button",{onClick:()=>C(t.id),className:`${s.actionBtn} ${s.delete}`,title:"–£–¥–∞–ª–∏—Ç—å",children:e.jsx(k,{size:16})})]})})]},t.id)})})]})}),e.jsx("div",{className:s.mobileAccounts,children:u.map((t,a)=>{const n=F(t.characters),m=t.price;return e.jsxs(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:a*.1},className:s.mobileAccountCard,children:[e.jsxs("div",{className:s.mobileAccountHeader,children:[e.jsxs("div",{className:s.mobileAccountId,children:["#",t.id]}),e.jsx(v,{status:t.status,account:t})]}),e.jsxs("div",{className:s.mobileAccountMain,children:[e.jsx("img",{src:"/api/img/"+t.img,alt:t.title,className:s.mobileAccountImage}),e.jsxs("div",{className:s.mobileAccountDetails,children:[e.jsx("h3",{className:s.mobileAccountTitle,children:t.title}),e.jsxs("p",{className:s.mobileAccountNumber,children:["–ù–æ–º–µ—Ä: ",t.account_number]})]})]}),e.jsxs("div",{className:s.mobileAccountInfo,children:[e.jsxs("div",{className:s.mobileInfoRow,children:[e.jsx("span",{className:s.mobileInfoLabel,children:"–°—Ç–∞—Ç—É—Å:"}),e.jsxs("div",{className:s.mobileStatusCell,children:[e.jsx(v,{status:t.status,account:t}),e.jsx("button",{onClick:()=>T(t),className:s.statusChangeBtn,title:"–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å",children:e.jsx(q,{size:14})})]})]}),e.jsxs("div",{className:s.mobileInfoRow,children:[e.jsx("span",{className:s.mobileInfoLabel,children:"–¶–µ–Ω–∞/—á–∞—Å:"}),e.jsx("span",{className:s.mobileInfoValue,children:N(m)})]})]}),n.length>0&&e.jsxs("div",{className:s.mobileFeatures,children:[n.slice(0,3).map((p,f)=>e.jsx("span",{className:s.mobileFeature,children:p},f)),n.length>3&&e.jsxs("span",{className:s.mobileFeature,children:["+",n.length-3]})]}),e.jsxs("div",{className:s.mobileActions,children:[e.jsxs("button",{onClick:()=>w(t.id),className:s.actionBtn,title:"–ü—Ä–æ—Å–º–æ—Ç—Ä",children:[e.jsx(R,{size:16}),"–ü—Ä–æ—Å–º–æ—Ç—Ä"]}),e.jsxs("button",{onClick:()=>y(t.id),className:s.actionBtn,title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",children:[e.jsx(B,{size:16}),"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"]}),e.jsxs("button",{onClick:()=>C(t.id),className:`${s.actionBtn} ${s.delete}`,title:"–£–¥–∞–ª–∏—Ç—å",children:[e.jsx(k,{size:16}),"–£–¥–∞–ª–∏—Ç—å"]})]})]},t.id)})}),e.jsx(K,{isOpen:D,onClose:()=>d(!1),title:`–°–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ #${i?.id}`,size:"medium",children:i&&e.jsxs("div",{className:s.statusModal,children:[e.jsxs("div",{className:s.accountPreview,children:[e.jsx("img",{src:"/api/img/"+i.img,alt:i.title,className:s.previewImage}),e.jsxs("div",{className:s.previewInfo,children:[e.jsx("h4",{className:s.previewTitle,children:i.title}),e.jsxs("p",{className:s.previewNumber,children:["–ù–æ–º–µ—Ä: ",i.account_number]}),e.jsxs("p",{className:s.previewNumber,children:["–¶–µ–Ω–∞: ",N(i.price),"/—á–∞—Å"]})]})]}),e.jsxs("div",{className:s.statusForm,children:[e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{className:s.label,children:"–ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å"}),e.jsxs("select",{className:s.select,value:o.status,onChange:t=>x(a=>({...a,status:t.target.value,hours:t.target.value==="rented"?a.hours:1})),children:[e.jsx("option",{value:"free",children:"–°–≤–æ–±–æ–¥–µ–Ω"}),e.jsx("option",{value:"rented",children:"–ê—Ä–µ–Ω–¥–æ–≤–∞–Ω"}),e.jsx("option",{value:"unavailable",children:"–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω"})]})]}),o.status==="rented"&&e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{className:s.label,children:[e.jsx(Q,{size:16}),"–ü–µ—Ä–∏–æ–¥ –∞—Ä–µ–Ω–¥—ã (—á–∞—Å—ã)"]}),e.jsx("input",{type:"number",className:s.input,value:o.hours,onChange:t=>x(a=>({...a,hours:t.target.value})),min:"1",max:"720",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤"}),e.jsxs("div",{className:s.hoursHint,children:["–ë—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: ~",Math.round(o.hours*i.price)," ‚ÇΩ"]})]}),e.jsxs("div",{className:s.statusInfo,children:[o.status==="free"&&e.jsxs("div",{className:s.infoFree,children:[e.jsx("strong",{children:"–°–≤–æ–±–æ–¥–µ–Ω:"})," –ê–∫–∫–∞—É–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∞—Ä–µ–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"]}),o.status==="rented"&&e.jsxs("div",{className:s.infoRented,children:[e.jsx("strong",{children:"–ê—Ä–µ–Ω–¥–æ–≤–∞–Ω:"})," –ê–∫–∫–∞—É–Ω—Ç –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –∑–∞–Ω—è—Ç—ã–π –Ω–∞ ",o.hours," —á–∞—Å–æ–≤"]}),o.status==="unavailable"&&e.jsxs("div",{className:s.infoUnavailable,children:[e.jsx("strong",{children:"–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω:"})," –ê–∫–∫–∞—É–Ω—Ç —Å–∫—Ä—ã—Ç –∏–∑ –ø–æ–∏—Å–∫–∞ –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∞—Ä–µ–Ω–¥—ã"]})]})]}),e.jsxs("div",{className:s.modalActions,children:[e.jsx(h,{variant:"secondary",onClick:()=>d(!1),disabled:j,children:"–û—Ç–º–µ–Ω–∞"}),e.jsxs(h,{variant:"primary",onClick:U,loading:j,disabled:j,children:[e.jsx(q,{size:16}),"–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å"]})]})]})}),u.length===0&&!g&&e.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:s.emptyState,children:e.jsxs("div",{className:s.emptyContent,children:[e.jsx("span",{className:s.emptyIcon,children:"üéÆ"}),e.jsx("h3",{className:s.emptyTitle,children:c||r!=="all"?"–ê–∫–∫–∞—É–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã":"–ê–∫–∫–∞—É–Ω—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç"}),e.jsx("p",{className:s.emptyText,children:c||r!=="all"?"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞":"–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –∏–≥—Ä–æ–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –∞—Ä–µ–Ω–¥—ã"}),e.jsxs(h,{variant:"primary",onClick:S,children:[e.jsx(M,{size:16}),"–î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç"]})]})})]})});export{ps as default};
