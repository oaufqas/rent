import{c as P,r as n,j as e,m as C,o as b,C as T,e as R,u as E,L as A,R as g,A as B}from"./index-BMjTxWI5.js";import{a as O}from"./accountStore-C6L7ROPf.js";import{S as $}from"./StatusBadge-DyHTHczb.js";import{B as D}from"./Button-D0cEhXue.js";import{P as I}from"./PriceCalculator-BbMmP8b7.js";import{T as L,C as M}from"./CustomTimeInput-qnoOm7gn.js";import"./AccountService-vNVs7x2E.js";import"./dateUtils-S97u1aLj.js";import"./usePriceCalculations-HJ7VHZks.js";import"./Input-kAJO1UCZ.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],z=P("pause",H);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],S=P("play",V),F="_videoPlayer_1ukka_3",U="_video_1ukka_3",G="_controls_1ukka_35",X="_controlsVisible_1ukka_57",q="_progressContainer_1ukka_67",J="_progressBar_1ukka_87",K="_controlsBottom_1ukka_103",Q="_playPauseButton_1ukka_119",W="_centerPlayButton_1ukka_159",Y="_playButton_1ukka_199",Z="_time_1ukka_233",ee="_clickOverlay_1ukka_251",te="_placeholder_1ukka_271",a={videoPlayer:F,video:U,controls:G,controlsVisible:X,progressContainer:q,progressBar:J,controlsBottom:K,playPauseButton:Q,centerPlayButton:W,playButton:Y,time:Z,clickOverlay:ee,placeholder:te},se=({src:d,poster:p,autoPlay:_=!1})=>{const[c,s]=n.useState(!1),[x,u]=n.useState(0),[i,f]=n.useState(0),[h,m]=n.useState(!1),t=n.useRef(null);n.useEffect(()=>{if(_&&d&&t.current){const r=setTimeout(()=>{t.current.muted=!0,t.current.playsInline=!0,t.current.play().catch(()=>{console.log("Autoplay not allowed")})},1e3);return()=>clearTimeout(r)}},[_,d]);const v=()=>{t.current&&(u(t.current.currentTime),f(t.current.duration||0))},k=()=>{t.current&&f(t.current.duration)},y=()=>{t.current&&(c?t.current.pause():(t.current.muted=!1,t.current.play().catch(console.error)),s(!c))},w=r=>{if(t.current&&i){const j=r.currentTarget.getBoundingClientRect(),N=(r.clientX-j.left)/j.width;t.current.currentTime=N*i}},l=r=>{const j=Math.floor(r/60),N=Math.floor(r%60);return`${j}:${N.toString().padStart(2,"0")}`};return d?e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:a.videoPlayer,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onTouchStart:()=>m(!0),children:[e.jsx("video",{ref:t,controls:!1,muted:!0,playsInline:!0,loop:!0,preload:"metadata",className:a.video,poster:p,onPlay:()=>s(!0),onPause:()=>s(!1),onTimeUpdate:v,onLoadedMetadata:k,children:e.jsx("source",{src:d,type:"video/mp4"})}),e.jsxs("div",{className:`${a.controls} ${h||!c?a.controlsVisible:""}`,children:[e.jsx("div",{className:a.progressContainer,onClick:w,children:e.jsx("div",{className:a.progressBar,style:{width:i?`${x/i*100}%`:"0%"}})}),e.jsxs("div",{className:a.controlsBottom,children:[e.jsx("button",{className:a.playPauseButton,onClick:y,children:c?e.jsx(z,{size:20,fill:"black"}):e.jsx(S,{size:20,fill:"black"})}),e.jsxs("div",{className:a.time,children:[l(x)," / ",l(i)]})]})]}),!h&&c&&e.jsx("div",{className:a.clickOverlay,onClick:()=>m(!0)}),!c&&e.jsx("div",{className:a.centerPlayButton,onClick:y,children:e.jsx("div",{className:a.playButton,children:e.jsx(S,{size:48,fill:"white"})})})]}):e.jsx("div",{className:a.placeholder,children:e.jsx("span",{children:"üéÆ –í–∏–¥–µ–æ –æ–±–∑–æ—Ä"})})},oe="_accountDetail_1pw5i_1",ne="_container_1pw5i_11",ae="_loading_1pw5i_23",re="_notFound_1pw5i_23",ce="_breadcrumbs_1pw5i_63",ie="_content_1pw5i_101",le="_mediaSection_1pw5i_115",ue="_infoSection_1pw5i_155",de="_header_1pw5i_167",me="_titleRow_1pw5i_179",pe="_title_1pw5i_179",_e="_accountNumber_1pw5i_209",he="_description_1pw5i_219",xe="_rentalControls_1pw5i_219",fe="_orderButton_1pw5i_289",o={accountDetail:oe,container:ne,loading:ae,notFound:re,breadcrumbs:ce,content:ie,mediaSection:le,infoSection:ue,header:de,titleRow:me,title:pe,accountNumber:_e,description:he,rentalControls:xe,orderButton:fe},Pe=b(()=>{const{store:d}=n.useContext(T),{id:p}=R(),_=E(),{fetchAccount:c}=O,[s,x]=n.useState(null),[u,i]=n.useState(3),[f,h]=n.useState(!1),[m,t]=n.useState(!1),[v,k]=n.useState(!0);n.useEffect(()=>{p&&(async()=>{try{const r=await c(p);x(r)}catch(r){console.error("Error loading account:",r)}finally{window.scrollTo(0,0),k(!1)}})()},[p,c]),n.useEffect(()=>{if(u>0){const l=setTimeout(()=>t(!0),500);return()=>clearTimeout(l)}},[u]);const y=l=>{i(l),l!=="custom"&&h(!0)},w=()=>{if(!d.isAuth){_(g.LOGIN);return}_(`${g.ORDER_CREATE}?account=${s.id}&hours=${u}`)};return v?e.jsx("div",{className:o.loading,children:e.jsx(A,{fullScreen:!0})}):s?e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:o.accountDetail,children:e.jsxs("div",{className:o.container,children:[e.jsxs("nav",{className:o.breadcrumbs,children:[e.jsx("a",{href:g.HOME,children:"–ì–ª–∞–≤–Ω–∞—è"}),e.jsx("span",{children:"/"}),e.jsxs("span",{children:["–ê–∫–∫–∞—É–Ω—Ç #",s.id]})]}),e.jsxs("div",{className:o.content,children:[e.jsxs("div",{className:o.mediaSection,children:[e.jsx(se,{src:"/api/video/"+s.video,autoPlay:!0}),e.jsxs("div",{className:o.rentalControls,children:[e.jsx("h3",{children:"–ê—Ä–µ–Ω–¥–∞ –∞–∫–∫–∞—É–Ω—Ç–∞"}),e.jsx(L,{selectedHours:u,onHoursChange:y,onCustomToggle:h,disabled:s.status!=="free"}),e.jsx(B,{children:f&&e.jsx(M,{onHoursChange:i,initialHours:25})}),e.jsx(I,{basePrice:s.price,hours:u}),e.jsx(B,{children:m&&e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:o.orderButton,children:e.jsx(D,{variant:"primary",size:"large",onClick:w,disabled:s.status!=="free",children:s.status==="free"?"–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å":"–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ"})})})]})]}),e.jsxs("div",{className:o.infoSection,children:[e.jsxs("div",{className:o.header,children:[e.jsxs("div",{className:o.titleRow,children:[e.jsx("h1",{className:o.title,children:s.title}),e.jsx($,{status:s.status,account:s})]}),e.jsxs("span",{className:o.accountNumber,children:["#",s.account_number]})]}),e.jsxs("div",{className:o.description,children:[e.jsx("h3",{children:"–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"}),e.jsx("p",{children:s.description})]})]})]})]})}):e.jsxs("div",{className:o.notFound,children:[e.jsx("h2",{children:"–ê–∫–∫–∞—É–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω"}),e.jsx("p",{children:"–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –±—ã–ª —É–¥–∞–ª–µ–Ω"})]})});export{Pe as default};
